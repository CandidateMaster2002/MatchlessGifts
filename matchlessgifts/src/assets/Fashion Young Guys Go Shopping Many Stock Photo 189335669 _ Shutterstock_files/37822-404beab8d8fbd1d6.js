"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37822],{96053:function(e,n,t){t.d(n,{i:function(){return c}});var r=t(52322),i=t(67550),s=t(72841),o=t(25237),a=t.n(o)()(function(){return Promise.all([t.e(41075),t.e(66198),t.e(68286),t.e(82411),t.e(27050),t.e(85118),t.e(10185),t.e(23747),t.e(8123),t.e(60407),t.e(87100),t.e(71728),t.e(31722),t.e(72113),t.e(25943)]).then(t.bind(t,77141)).then(function(e){return e.ConfirmationDrawerContent})},{loadableGenerated:{webpack:function(){return[77141]}},ssr:!1}),c=function(e){var n=e.licensedContent,t=e.onDrawerClose,o=e.isFetchingVideos,c=e.videos;return o?(0,r.jsx)(i.Z,{sx:{height:"inherit",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(s.Z,{"data-automation":"ConfirmationDrawer_Loading",color:"inherit",size:24})}):(0,r.jsx)(a,{licensedContent:n,onDrawerClose:t,videos:c})}},54987:function(e,n,t){t.d(n,{$:function(){return l},z:function(){return c}});var r=t(70865),i=t(96670),s=t(52322),o=t(25237),a=t.n(o),c=a()(function(){return Promise.all([t.e(24394),t.e(41075),t.e(28903),t.e(70180),t.e(60902),t.e(73589),t.e(82361),t.e(41594),t.e(48203),t.e(63168),t.e(40859),t.e(11701),t.e(79413),t.e(89118),t.e(32485)]).then(t.bind(t,73399)).then(function(e){return e.ImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[73399]}},ssr:!1}),u=a()(function(){return Promise.all([t.e(70180),t.e(60902),t.e(18729),t.e(41594),t.e(48203),t.e(79413),t.e(23739)]).then(t.bind(t,60725)).then(function(e){return e.GenerativeImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[60725]}},ssr:!1}),l=function(e){var n=e.shouldRenderGenerativeLicenseDrawer,t=e.isImageLicenseSwitcher;return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(u,(0,r.Z)({},e)):(0,s.jsx)(c,(0,i.Z)((0,r.Z)({},e),{isImageLicenseSwitcher:t}))})}},5676:function(e,n,t){t.d(n,{E:function(){return G}});var r=t(70865),i=t(96670),s=t(26297),o=t(87394),a=t(52322),c=t(79441),u=t(44699),l=t(81034),d=t(8149),f=t(94054),v=t(95927),m=t(79320),h=t(44297),p=t(95775),g=t(59004),b=t(62767),w=t(86545),y=t(776),S=t(72075),C=t(25237),D=t.n(C),I=t(5632),P=t(2784),Z=t(80589),L=t(3255),E=t(96053),U=D()(function(){return Promise.all([t.e(41075),t.e(73589),t.e(40859),t.e(92521),t.e(99476)]).then(t.bind(t,99476)).then(function(e){return e.EditorialImageLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[99476]}},ssr:!1}),j=D()(function(){return t.e(10878).then(t.bind(t,10878)).then(function(e){return e.EditorialVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[10878]}},ssr:!1}),k=t(54987),A=D()(function(){return t.e(9293).then(t.bind(t,9293)).then(function(e){return e.LoggedInMusicLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[9293]}},ssr:!1}),x=D()(function(){return t.e(26278).then(t.bind(t,26278)).then(function(e){return e.LoggedInSfxLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[26278]}},ssr:!1}),V=D()(function(){return Promise.all([t.e(41075),t.e(73589),t.e(40859),t.e(92521),t.e(89047),t.e(21543)]).then(t.bind(t,21543)).then(function(e){return e.LoggedInVideoLicenseDrawerContent})},{loadableGenerated:{webpack:function(){return[21543]}},ssr:!1}),T=D()(function(){return Promise.all([t.e(74384),t.e(41594),t.e(7787)]).then(t.bind(t,37488)).then(function(e){return e.ExperimentCVRT1335})},{loadableGenerated:{webpack:function(){return[37488]}},ssr:!1}),q=function(e){var n=e.asset,t=e.onDrawerClose,i=(0,m.y)().setWasLicensingEventSuccessful,s=(0,o.Z)((0,P.useState)(null),2),a=s[0],c=s[1],u=(0,h.A8)(n),l=(0,L.kY)().mutate,v=(0,P.useCallback)(function(e){var t=e.content,s=e.assetsInfo;c(t),i(!0),l((0,p.jC)({licenseeIdentifier:f.RU_,assets:[n]})),l((0,p.jC)((0,r.Z)({licenseeIdentifier:f.RU_,assets:[n]},u===d.pX&&{selectedAssetSize:s[0].selectedAssetSize},u===d.k4&&{licenseName:s[0].licenseName})))},[n,u,l,i]),g=(0,P.useCallback)(function(e){c(e.content)},[]),b=(0,P.useCallback)(function(){c(null),t()},[t]),w=(0,o.Z)((0,P.useState)({}),2),y=w[0],S=w[1],C=(0,o.Z)((0,P.useState)({status:"",error:void 0}),2);return{confirmationDrawerCloseHandler:b,licenseDrawerState:y,licenseDrawerStatus:C[0],licensedContent:a,licensingConfirmationContentDisplayHandler:v,redownloadConfirmationContentDisplayHandler:g,setLicenseDrawerState:S,setLicenseDrawerStatus:C[1],setLicensedContent:c}},G=function(e){var n,t,f,m,C=e.onAddToCartSuccess,D=e.onDrawerClose,L=e.isImageLicenseSwitcher,G=e.membershipProps,H=e.buttonClickHandler,_=e.licensedContentHandler,R=e.openLicenseDrawerHandler,F=(0,o.Z)((0,P.useState)(""),2),M=F[0],$=F[1],O=(0,v.i)().asset,z=(0,h.A8)(O),N=(0,b.V9)().data,X=(void 0===N?{}:N).totalNumSubscriptionsAllTime,B=(0,h.yw)({asset:O}),Q=(0,I.useRouter)(),W=null==Q?void 0:Q.asPath;S.j&&(m=null==window?void 0:null===(n=window.location)||void 0===n?void 0:n.href);var K=(0,P.useCallback)(function(e){var n,t,r;n=m,console.error(e),null===(t=window.NREUM)||void 0===t||null===(r=t.noticeError)||void 0===r||r.call(t,e,{currentAsPath:W,msg:"(Convert team) - License Drawer - Generate - Image - Error",url:n})},[W,m]),Y=(0,c.L)({asset:O}).showLoggedInConversionPanel,J=(0,p.IP)({assets:[O]}).data,ee=(null==J?void 0:null===(t=J.licenses)||void 0===t?void 0:t.length)>0,en=q({asset:O,onDrawerClose:D}),et=en.confirmationDrawerCloseHandler,er=en.licenseDrawerState,ei=en.licenseDrawerStatus,es=en.licensedContent,eo=en.licensingConfirmationContentDisplayHandler,ea=en.redownloadConfirmationContentDisplayHandler,ec=en.setLicenseDrawerState,eu=en.setLicenseDrawerStatus,el=(0,P.useMemo)(function(){return(0,i.Z)((0,r.Z)({},er),{actionText:"licensing drawer displayed ".concat(ei.status," state to the user"),alertSeverity:ei.status,component:"LicenseDrawerContentSwitcher.jsx",assetType:"".concat((null==O?void 0:O.imageType)||""," ").concat(z),licenseType:M||""})},[er,ei,O,z,M]);(0,g.L)({customAttributes:el,error:ei.error,level:[u.cM,u.pn].includes(ei.status)?"error":"",msg:null===(f=ei.error)||void 0===f?void 0:f.message});var ed={onAddToCartSuccess:C,onDrawerClose:D,licenseDrawerStatus:ei,setLicenseDrawerStatus:eu,setLicenseDrawerState:ec,setLicenseType:$,onLicensingSuccess:eo,onRedownloadSuccess:ea};ed.onAddToCartSuccess;var ef=(0,s.Z)(ed,["onAddToCartSuccess"]),ev=(0,w.G)(O),em=ev.videos,eh=ev.isFetchingVideos;if((0,P.useEffect)(function(){es&&L&&(H(),es&&(R(),_(es)))},[es]),es)return(0,a.jsxs)(a.Fragment,{children:[L&&(0,a.jsx)(k.z,(0,i.Z)((0,r.Z)({},ef),{isImageLicenseSwitcher:L,membershipProps:G})),!L&&(0,a.jsx)(E.i,{licensedContent:es,onDrawerClose:et,videos:em,isFetchingVideos:eh})]});switch(z){case d.nj:return(0,a.jsx)(y.Mp,{value:l.hPQ,children:(0,a.jsx)(j,(0,r.Z)({},ef))});case d.k4:var ep=(0,r.Z)({shouldRenderGenerativeLicenseDrawer:B&&(0===X||void 0===X),isImageLicenseSwitcher:L,membershipProps:G},ef),eg=Y&&!ee?T:k.$;return(0,a.jsx)(Z.ErrorBoundary,{onError:K,fallback:(0,a.jsx)("p",{children:"An error occurred"}),children:(0,a.jsx)(eg,(0,r.Z)({},ep))});case d.pX:return(0,a.jsx)(V,(0,r.Z)({},ed));case d.tn:return(0,a.jsx)(x,(0,r.Z)({},ed));case d.xF:return(0,a.jsx)(A,(0,r.Z)({},ed));case d.VT:return(0,a.jsx)(U,(0,r.Z)({},ef));default:return null}};G.defaultProps={isImageLicenseSwitcher:!1,membershipProps:{},buttonClickHandler:function(){},licensedContentHandler:function(){},openLicenseDrawerHandler:function(){}}},33839:function(e,n,t){t.d(n,{u:function(){return Z}});var r=t(27739),i=t(60591),s=t(65532),o=t(87414),a=t(44297),c=t(77357),u=t(70008),l=t(2784),d=t(98788),f=t(70865),v=t(96670),m=t(87394),h=t(92228),p=t(45680),g=t(3571),b=t(6647),w=t(3255);function y(){var e=(0,h.Z)(["\n    query getPromotionsEligibility($data: ProductInput) {\n      getPromotionsEligibility(data: $data) {\n        data {\n          id\n          type\n          attributes {\n            discountPercentage\n          }\n        }\n        included {\n          attributes {\n            license\n            name\n            pricing {\n              discountedAmounts {\n                USD\n                CAD\n              }\n              prices {\n                USD\n                CAD\n              }\n            }\n          }\n          id\n          type\n        }\n      }\n    }\n  "]);return y=function(){return e},e}var S=function(e){var n=(null==e?void 0:e.getPromotionsEligibility)||{};try{var t=(0,m.Z)(n.data,1)[0].attributes.discountPercentage,r=(0,m.Z)(n.included,1)[0].attributes.pricing,i=r.discountedAmounts,s=r.prices,o=i.USD,a=s.USD;return{percentage:t,price:o,originalPrice:a}}catch(e){return{}}},C=function(e){var n=e.membershipProducts;return{variables:{data:{productIds:null==n?void 0:n.map(function(e){return e.id}),currency:"USD"}},query:(0,b.gql)(y())}},D=function(e){var n,t=e.membershipProducts,r=void 0===t?[]:t,i=e.shouldFetch,s=(0,g.H)("/"),o=C({membershipProducts:r}),a=o.query,c=o.variables,u=(null==r?void 0:r.length)>0&&void 0!==i&&i,l=(0,w.ZP)(u&&[a,c],(n=(0,d.Z)(function(e){var n;return(0,p.__generator)(this,function(t){switch(t.label){case 0:return[4,s((n=(0,m.Z)(e,2))[0],n[1])];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)})),h=l.data,b=l.isLoading;return(0,v.Z)((0,f.Z)({},S(h)),{isLoading:b})},I=t(62767),P=function(){var e=(0,I.V9)().data;return{isMember:null==e?void 0:e.activeSubscriptions.some(function(e){var n;return(null==e?void 0:null===(n=e.product)||void 0===n?void 0:n.name)===r.E3O})}},Z=function(e){var n=e.asset,t=e.products,d=void 0===t?[]:t,f=e.discount,v=P().isMember,m=void 0!==v&&v,h=(0,u.B)().isIndiaRegion,p=(0,s.PE)(),g=p.currencyData,b=(void 0===g?{}:g).currency,w=p.region,y=!h&&["US","CA"].includes(w),S=(0,a.RT)({asset:n}),C=m&&y&&"USD"===(void 0===b?"USD":b),I=(0,o.$A)(d,r.E3O),Z=null==d?void 0:d.find(function(e){return e.name===r.gIk&&"single-asset-license"===e.archetype}),L=(0,l.useMemo)(function(){return I&&Z?[I,Z]:void 0},[I,Z]),E=(0,c.L)({queryParams:i.sQ,shouldFetch:m&&!L}),U=D({membershipProducts:E||L,shouldFetch:m&&!f});return(0,l.useMemo)(function(){return C?{isMembershipValuePlan:m,membershipProducts:E||L,discount:(null==U?void 0:U.price)?U:f||{},isFreeContentTierAsset:S}:{}},[C,m,E,L,U,f,S])}},77357:function(e,n,t){t.d(n,{L:function(){return d}});var r=t(70865),i=t(96670),s=t(81740),o=t(65532),a=t(49670),c=t(9009),u=t(3255),l=function(e){var n=e.queryParams;return(0,s.Xp)({queryParams:n}).formattedUrl},d=function(e){var n=e.queryParams,t=e.products,s=void 0===t?[]:t,d=e.shouldFetch,f=(0,o.PE)().region,v=(null==s?void 0:s.length)||!(void 0===d||d)?null:l({queryParams:(0,i.Z)((0,r.Z)({},n),{country:f})}),m=(0,u.ZP)(v,function(e){return a.uS.get(e).then(function(e){return(0,c.O)(e.data)})}).data;return(null==s?void 0:s.length)?s:m}},86545:function(e,n,t){t.d(n,{G:function(){return V}});var r=t(44297),i=t(43637),s=t(9823),o=t(94909),a=t(12649),c=t(27764),u=t(5632),l=t(98788),d=t(70865),f=t(87394),v=t(50930),m=t(45680),h=t(81740),p=t(76279),g=t(65532),b=t(40233),w=t(49670),y=t(9009),S=t(35005),C=t(5967),D=t(2784),I=t(92228),P=t(3571),Z=t(6647),L=t(3255);function E(){var e=(0,I.Z)(["\n    query SimilarAssetsForImage($where: MediaWhere!, $top: Int, $collectionType: CollectionTypeEnum) {\n      creativeImages(where: $where) {\n        __typename\n        data {\n          classicId\n          similarImages(top: $top, collectionType: $collectionType) {\n            entities {\n              classicId\n            }\n          }\n        }\n      }\n    }\n  "]);return E=function(){return e},e}var U=function(e){var n=e.entities,t=new Set;return(void 0===n?[]:n).reduce(function(e,n){var r=n.classicId;return t.has(r)?e:(t.add(r),(0,v.Z)(e).concat([r]))},[])},j=function(e){var n=(0,f.Z)(e.data,1)[0].similarImages.entities;return U({entities:void 0===n?[]:n})},k=function(e){var n,t=e.assetId,r=(0,P.H)("/"),i={variables:{collectionType:"APPROVED_VIDEO",where:{classicId:t}},query:(0,Z.gql)(E())},s=i.query,o=i.variables;return(0,L.ZP)(!!t&&[s,o],(n=(0,l.Z)(function(e){var n;return(0,m.__generator)(this,function(t){switch(t.label){case 0:return[4,r((n=(0,f.Z)(e,2))[0],n[1])];case 1:return[2,j(t.sent().creativeImages).slice(0,4)]}})}),function(e){return n.apply(this,arguments)}))},A=(0,C.j)().thumbsRewriteHostname,x=function(e){var n=(0,g.PE)(),t=n.region,r=n.locale,i=(0,f.Z)((0,D.useState)(void 0),2),s=i[0],o=i[1],a=(0,f.Z)((0,D.useState)(!1),2),c=a[0],u=a[1],C=(0,b.d)(),I=k({assetId:e}),P=I.data,Z=I.isLoading,L=I.error;return(0,D.useEffect)(function(){if(e){if(L){var n,i,s;o([]),u(!1),C({actionName:"Errors - Fetch visually similar videos",customAttributes:(0,d.Z)({assetId:e},L.errors&&{message:null===(n=L.errors[0])||void 0===n?void 0:n.message,code:null===(i=L.errors[0])||void 0===i?void 0:null===(s=i.extenstions)||void 0===s?void 0:s.code})});return}u(!0),Z||(0,l.Z)(function(){return(0,m.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.allSettled(null==P?void 0:P.map(function(e){var n={id:e,country:t,language:r,namespace:p.EG.SHUTTERSTOCK,"page[number]":1,"page[size]":100,q:"",queryTranslations:!1,recordActivity:!1};return w.uS.get((0,h.om)({queryParams:n}).formattedUrl).then(function(e){var n=e.data;return(0,y.O)(n)})}))];case 1:return o(e.sent().reduce(function(e,n){return("fulfilled"===n.status&&(0,S.jl)(n.value,A),"rejected"===n.status)?e:(0,v.Z)(e).concat([n.value])},[])),u(!1),[2]}})})()}},[e,Z,o,u]),{videos:s,isLoading:c}},V=function(e){var n=(0,s.D)().isBrandSstk,t=(0,a.B)(),l=(0,r.aT)(e)&&!(0,r.Xo)(e),d=(0,r.tS)({asset:e}),f=l&&(0,r.PD)({channels:null==e?void 0:e.channels}),v=(0,o.d)(),m=(0,r.f8)(e),h=(0,u.useRouter)(),p=(0,c.fM)(h),g=(0,i.k7)(e),b=n&&t&&l&&!d&&!v&&!f&&!m&&!p&&!g,w=x(b?e.id:""),y=w.videos,S=w.isLoading;return b?{videos:y,isFetchingVideos:S}:{videos:[],isFetchingVideos:!1}}},35005:function(e,n,t){t.d(n,{US:function(){return d},jl:function(){return l}});var r=t(87394),i=t(8149),s=t(44297),o=t(63256),a=function(e,n){return e?e.replace(/(ak\.(qa\.|dev\.|)picdn\.net|image\.(qa\.|dev\.|)shutterstock\.com|(picdn\.|cdn\.)(qa\.|dev\.|)shutterstock\.com|picdn\.(qa\.|dev\.|)shuttercorp\.net)/,n):e},c=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];"object"==typeof e.displays&&Object.keys(e.displays).forEach(function(r){if(e.displays[r].src){var i=RegExp("^(?<before>.*)\\/z\\/(?<description>\\S{0,})-(?<id>\\d+).jpg$").exec(e.displays[r].src);i&&(e.displays[r].src="".concat(i.groups.before,"/shutterstock/photos/").concat(i.groups.id,"/display_1500/").concat(i.groups.description,"-").concat(i.groups.id,".jpg")),t&&(e.displays[r].src=a(e.displays[r].src,n))}}),t&&e.src&&(e.src=a(e.src,n))},u=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];"object"==typeof e.previewVideoUrls&&Object.keys(e.previewVideoUrls).forEach(function(r){e.previewVideoUrls[r]&&t&&(e.previewVideoUrls[r]=a(e.previewVideoUrls[r],n))}),"object"==typeof e.thumbVideoUrls&&Object.keys(e.thumbVideoUrls).forEach(function(r){e.thumbVideoUrls[r]&&t&&(e.thumbVideoUrls[r]=a(e.thumbVideoUrls[r],n))}),e.previewImageUrl&&(t&&(e.previewImageUrl=a(e.previewImageUrl,n)),e.previewImageUrl=(0,o.vG)(e.previewImageUrl)),e.thumbImageUrl&&(t&&(e.thumbImageUrl=a(e.thumbImageUrl,n)),e.thumbImageUrl=(0,o.vG)(e.thumbImageUrl))},l=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,s.Tp)(e);r===i.k4&&c(e,n,t),r===i.pX&&u(e,n,t)},d=function(e){var n,t,i,s,o,a=e.asset,c=void 0===a?{}:a,u=e.local,d=void 0===u||u,f=e.thumbsRewriteHostname,v=e.relatedAssets,m=e.relatedAssetsToUse,h=e.sameArtistAssets,p=e.personalizedImages,g=c.containedInCollections,b=(0,r.Z)(g||[],1)[0],w=(void 0===b?{}:b).meta,y=(void 0===w?{}:w).items;((null==c?void 0:c.displays)||(null==c?void 0:c.previewImageUrl))&&l(c,f,d),c.sameModel&&c.sameModel.length>0&&(null===(n=c.sameModel)||void 0===n||n.forEach(function(e){l(e,f,d)})),c.sameArtist&&c.sameArtist.length>0&&(null===(t=c.sameArtist)||void 0===t||t.forEach(function(e){l(e,f,d)})),c.relatedSelect&&c.relatedSelect.length>0&&(null===(i=c.relatedSelect)||void 0===i||i.forEach(function(e){l(e,f,d)})),c.visuallySimilarVideos&&c.visuallySimilarVideos.length>0&&(null==c||null===(s=c.visuallySimilarVideos)||void 0===s||s.forEach(function(e){l(e,f,d)})),c.related&&c.related.length>0&&(null==c||null===(o=c.related)||void 0===o||o.forEach(function(e){l(e,f,d)})),v&&v.length>0&&v.forEach(function(e){l(e,f,d)}),m&&m.length>0&&m.forEach(function(e){l(e,f,d)}),h&&h.length>0&&h.forEach(function(e){l(e,f,d)}),y&&y.length>0&&y.forEach(function(e){l(e,f,d)}),p&&p.length>0&&p.forEach(function(e){l(e,f,d)})}}}]);
//# sourceMappingURL=37822-404beab8d8fbd1d6.js.map